name: Ansible Lint & Syntax Check
on:
  push:
    paths:
      - '**/*.yml'
      - '**/*.yaml'

env:
  PYTHON_VERSION: 3.9.1
  ANSIBLE_VERSION: 2.15.3

jobs:
  ansible:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3


      - name: Show OS Version
        run: |
          echo "🖥️ Operating System Information:"
          uname -a  # Kernel and architecture info
          cat /etc/os-release  # OS version details  

      - name: Install Python & Pip
        run: |
          apt-get update
          apt-get install -y python3 python3-pip

     # - name: Set up Python ${{ env.PYTHON_VERSION }}
     #   uses: actions/setup-python@v4
     #   with:
     #     python-version: ${{ env.PYTHON_VERSION }}
            

      - name: Show Installed Python Version
        run: |
          echo "🐍 Python Version Installed: $PYTHON_VERSION""
          python3 --version

      #- name: Install Ansible ${{ env.ANSIBLE_VERSION }}
      #  run: |
      #    python3 -m pip install --upgrade pip
      #    pip install --upgrade setuptools wheel
      #    pip install --no-cache-dir ansible==${{ env.ANSIBLE_VERSION }}    

      #- name: Show Installed Ansible Version
      #  run: |
      #    echo "📌 Ansible Version Installed:"
      #    ansible --version

      #- name: Install unzip (for act)
      #  run: |
      #    apt-get update && apt-get install -y unzip python3 python3-pip ca-certificates

      #- name: Set up Python
      #  uses: actions/setup-python@v4
      #  with:
      #    python-version: '3.11'

      #- name: Set SSL environment variable
      #  run: echo "SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt" >> $GITHUB_ENV


      #- name: Install Ansible Verison ${{ env.ANSIBLE_VERSION }} & Required Collections - (disable SSL verification)
      #  run: |
      #    pip3 install --upgrade pip
      #    pip3 install ansible==${{ env.ANSIBLE_VERSION }} ansible-lint
      #    ANSIBLE_VERSION=$(ansible --version | head -n 1)
      #    echo "✅ Installed Ansible Version: $ANSIBLE_VERSION"
      #    echo "📌 Ansible Version Installed: $ANSIBLE_VERSION""
      #    export PYTHONHTTPSVERIFY=0
      #    ansible-galaxy collection install --ignore-certs community.general
      
      #- name: Show Ansible Version
      #  run: ansible --version

      #- name: Install Ansible
      #  run: pip3 install ansible ansible-lint

      #- name: Ansible Lint
      #  run: ansible-lint

      #- name: Ansible Syntax Check
      #  run: ansible-playbook --syntax-check playbook.yml